# 個人雲端 (Personal Cloud)

## 專案描述
這是一個基於 Node.js 和 Express.js 開發的個人雲端儲存應用程式。它提供使用者檔案管理、上傳、下載、預覽等基本功能，並具備使用者認證、多國語言、亮暗模式切換等個人化設定。此外，系統還引入了使用者角色管理功能，區分管理員和一般用戶，讓管理員能更全面地管理使用者帳號及其檔案。

## 主要功能

### 1. 使用者認證與授權
*   **使用者註冊**：新使用者可註冊帳號。
    *   **注意**：系統中**第一個註冊的使用者將自動被賦予 `admin` (管理員) 角色**，之後註冊的使用者皆為 `user` (一般用戶)。
*   **使用者登入**：已註冊使用者可登入系統。
*   **使用者登出**：登出功能。
*   **JWT 認證**：使用 JSON Web Tokens (JWT) 進行身份驗證，確保 API 請求的安全性。

### 2. 檔案管理
*   **檔案列表**：顯示當前目錄下的檔案和資料夾。
*   **檔案上傳**：支援多檔案上傳，並顯示**上傳進度條**。
*   **建立資料夾**：在當前目錄下建立新資料夾。
*   **刪除**：刪除選定的檔案或資料夾 (支援多選)。
*   **重新命名/移動**：重新命名檔案或資料夾，或將其移動到其他路徑。
*   **下載**：下載選定的檔案，並顯示**下載進度條**。
*   **預覽**：支援圖片、影片 (MP4)、PDF、文字檔案 (txt, log, json, js, css, html, md) 的線上預覽。
*   **拖曳移動**：支援將檔案或資料夾拖曳到其他資料夾進行移動。

### 3. 個人化設定
*   **亮/暗模式**：使用者可切換亮色、暗色主題，或跟隨系統設定。
*   **自定義背景**：使用者可設定自定義的背景圖片 URL。
*   **多國語言**：支援繁體中文和英文介面切換。

### 4. 管理員功能 (Admin Only)
*   **管理面板**：管理員登入後可看到「管理面板」按鈕，進入後可管理所有使用者。
*   **使用者管理**：
    *   列出所有使用者及其角色。
    *   變更使用者角色 (升級為管理員/降級為一般用戶)。
    *   刪除使用者 (不可刪除自己)。
    *   **建立新使用者**：管理員可直接為其他使用者建立帳號，並指定其初始角色。
*   **使用者視角切換**：管理員可透過下拉選單切換檢視其他使用者的檔案系統，並對其檔案進行操作 (上傳、建立、刪除、移動等)。

### 5. UI/UX 優化
*   **精簡工具列**：將「選擇檔案」、「上傳」、「新增資料夾」等功能整合到頂部導航欄的 `+` (動作) 按鈕下拉選單中，節省空間。
*   **響應式工具列**：頂部工具列在小螢幕設備上會自動調整佈局，按鈕會更緊湊。
*   **右鍵選單優化**：調整了右鍵選單項目的高度，使其更緊湊。

## 使用技術

*   **後端**：
    *   Node.js
    *   Express.js (Web 框架)
    *   Multer (檔案上傳處理)
    *   jsonwebtoken (JWT 認證)
    *   bcryptjs (密碼加密)
    *   fluent-ffmpeg (影片轉檔)
    *   fs (Node.js 檔案系統模組)
    *   path (Node.js 路徑模組)
    *   cors (跨域資源共享)
*   **前端**：
    *   HTML5
    *   CSS3 (使用 CSS 變數實現主題切換)
    *   JavaScript (ES6+)

## 安裝與設定

1.  **環境準備**：
    *   確保您的系統已安裝 Node.js (建議 LTS 版本) 和 npm。

2.  **專案複製**：
    ```bash
    git clone <專案的 Git 儲存庫網址>
    cd NAS
    ```

3.  **安裝依賴**：
    ```bash
    npm install
    ```

4.  **啟動後端伺服器**：
    ```bash
    node backend/server.js
    ```
    伺服器將運行在 `http://localhost:3000`。

5.  **訪問前端介面**：
    在您的瀏覽器中打開 `http://localhost:3000`。

## 使用說明

### 1. 首次註冊 (建立管理員帳號)
*   首次訪問應用程式時，您會被導向登入/註冊頁面。
*   請先點擊「立即註冊」建立一個帳號。**這個帳號將自動成為管理員**。
*   使用此帳號登入。

### 2. 一般使用者操作
*   登入後，您會看到檔案列表。
*   點擊頂部導航欄的 `+` (動作) 按鈕，可選擇「選擇檔案」或「新增資料夾」。
*   右鍵點擊檔案或資料夾可進行「重新命名」、「刪除」、「下載」、「移動」等操作。
*   雙擊檔案可預覽，雙擊資料夾可進入。

### 3. 管理員操作
*   以管理員帳號登入後，您會在右上角看到一個「**管理面板**」按鈕。
*   點擊「管理面板」可進入使用者管理介面：
    *   **建立新使用者**：填寫使用者名稱、密碼並選擇角色，點擊「建立」即可新增帳號。
    *   **使用者列表**：顯示所有使用者。您可以對其他使用者進行「升級」(Promote to Admin)、「降級」(Demote to User) 或「刪除」操作。
*   在標題「個人雲端」旁邊，您會看到一個「**檢視使用者**」的下拉選單。管理員可以透過此選單切換到其他使用者的檔案視角，並對其檔案進行管理。

### 4. 個人化設定
*   點擊右上角的 `⚙️` (設定) 按鈕，可打開設定面板。
*   在這裡您可以：
    *   切換「主題」(亮色/暗色/跟隨系統)。
    *   設定「背景圖片 URL」。
    *   切換「語言」(繁體中文/English)。

## 未來潛在增強功能
*   檔案分享功能。
*   更精細的權限管理 (例如：資料夾權限)。
*   檔案版本控制。
*   搜尋功能。
*   支援更多檔案預覽類型。